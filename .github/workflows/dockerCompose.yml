name: Docker Compose Actions Workflow
on:
  push:
    branches: [CK-49-docker-image-push, develop]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Check out the repo
        uses: actions/checkout@v2

      - name: Log into Docker Hub
        uses: docker/login-action@f054a8b539a109f9f41c372932f1ae047eff08c9
        with:
          username: "chorekeeper" # ${{ secrets.DOCKER_USERNAME }}
          password: "team14chorekeeper" # ${{ secrets.DOCKER_PASSWORD }}

      - name: Build docker compose
        run: docker-compose build

      - name: Push images to dockerhub
        run: docker-compose push

      # - name: Build the stack
      #   run: docker-compose up -d
      # - name: Test
      #   run: docker run --network container:webapp-frontend appropriate/curl -s --retry 10 --retry-connrefused http://localhost:5000/